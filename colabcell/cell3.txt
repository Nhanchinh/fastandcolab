## Cell 3: Setup ngrok vÃ  Auto-update URL lÃªn Gist
#Setup ngrok vÃ  Auto-update URL lÃªn Gist
import requests
from pyngrok import ngrok

# Thiáº¿t láº­p ngrok
ngrok.set_auth_token(NGROK_AUTH_TOKEN)

# ÄÃ³ng tunnel cÅ© náº¿u cÃ³
ngrok.kill()

# Táº¡o tunnel má»›i
tunnel = ngrok.connect(8000)
PUBLIC_URL = tunnel.public_url

print(f"ğŸŒ Public URL: {PUBLIC_URL}")

# Auto-update URL lÃªn GitHub Gist
def update_gist_url(url):
    headers = {
        "Authorization": f"token {GITHUB_TOKEN}",
        "Accept": "application/vnd.github.v3+json"
    }
    data = {
        "files": {
            "colab_url.txt": {
                "content": url
            }
        }
    }
    resp = requests.patch(
        f"https://api.github.com/gists/{GIST_ID}",
        json=data,
        headers=headers
    )
    if resp.status_code == 200:
        print(f"âœ… URL Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t lÃªn Gist!")
        print(f"   Gist: https://gist.github.com/{GIST_ID}")
    else:
        print(f"âŒ Lá»—i cáº­p nháº­t Gist: {resp.status_code}")
        print(resp.text)

update_gist_url(PUBLIC_URL)